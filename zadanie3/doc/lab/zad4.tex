\section{Testy rozmytych regulatorów PID}
\label{lab:zad4}

\subsection{Funkcje przynależności}
\label{lab:zad4:fuzzyFunction}

Poprzez zastosowanie wielu lokalnych regulatorów dla poszczególnych punktów pracy
zaimplementowano rozmyty algorytm PID. Wybór regulatora dokonywany jest dzięki
funkcji przynależności. Jako funkcja przynależności posłużyła nam funkcja
trapezoidalna. Funkcja ta zawiera współczynniki, które definiują jak duży wpływ na
dane wyjście ma dany regulator w badanym obszarze. Dobór tych współczynników
został przeprowadzony poprzez obserwacje zachowania obiektu. Dla każdego z
lokalnych regulatorów PID należało dobrać parametry osobno w jego punkcie pracy, w
tym celu została opracowana funkcja optymalizująca je, wykorzystano do niej
wbudowaną funkcję programu MATLAB fmincon. Ostatecznie regulatory zostały
połączone w funkcji. Dzięki wykorzystaniu rozmytego algorytmu PID możemy
zniwelować problem nieliniowości obiektu.

\begin{figure}[H] 
    \centering
    \input{lab/figure/zad4fuzzyFunction.tex}
    \caption{Funkcje rozmycia}
    \label{lab:zad4:fuzzyFunction:figure}
 \end{figure}

\newpage

\subsection{Implementacja rozmytego algorytmu PID}
\label{lab:zad4:implPID}

\lstinputlisting[
    firstline=71, 
    lastline=87, 
    caption="Wyznaczanie nastaw rozmytych regulatorów PID"]
    {../lab/main.m}
%\newpage

\lstinputlisting[
    firstline=198, 
    lastline=229, 
    caption="Wyznaczenie wartości sterowania u"]
    {../lab/main.m}
%\newpage


\newpage

\subsection{Dobór parametrów lokalnych regulatorów PID}
\label{lab:zad4:paramPID}

\begin{figure}[H] 
    \centering
    \input{lab/figure/zad4PIDfuzzy.tex}
    \caption{Testy rozmytych regulatorów PID}
    \label{lab:zad4:eksperymenty:figure}
 \end{figure}

 Znormalizowana wartość wskaźnika jakości regulacji E wyniosła \num{1.7845}

%\newpage

\subsection{Wyniki eksperymentów}

Dobrze dobrana funkcja przynależności i dobrze nastrojone regulatory lokalne dadzą
znacznie lepszą jakość regulacji niż jeden klasyczny regulator bez rozmycia.

\newpage